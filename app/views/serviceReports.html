<div class="container servicereports-page">

  <div ng-show="signedIn()" ng-controller="ServicereportsCtrl">

    <form class="form-horizontal" ng-hide="servicereportAddMode || servicereportEditMode || servicereportPrintMode">
      <div class="form-group">
        <div class="col-xs-3" title="Add new service report">
          <button type="submit" class="btn btn-primary" ng-show="signedIn() && !(servicereportAddMode || servicereportEditMode)" ng-click="servicereportAddMode = true">
            <i class="glyphicon glyphicon-plus"></i>&nbsp;New report
          </button>
        </div>
        <div class="col-xs-6">
        </div>
        <div class="col-xs-3" title="Filter service reports">
          <div class="right-inner-addon">
            <i class="glyphicon glyphicon-search"></i>
            <input type="text" ng-model="search" class="form-control form-control-search" style="min-width: 8.0em;">
          </div>
        </div>  
      </div>
      <div class="vertical-spacer" style="height: 1.0em;"></div>
    </form>

    <div ng-hide="servicereportPrintMode">
      <table ng-table="tableParams" class="table">
        <tr>
          <th>
            <span ng-click="orderby = '-number'">Number</span>
            <a ng-click="orderby = 'number'"><i ng-show="orderby === '-number'" class="glyphicon glyphicon-chevron-up"></i></a>
            <a ng-click="orderby = '-number'"><i ng-show="orderby === 'number'" class="glyphicon glyphicon-chevron-down"></i></a>
          </th>
          <th>
            <span ng-click="orderby = '-date'">Date</span>
            <a ng-click="orderby = 'date'"><i ng-show="orderby === '-date'" class="glyphicon glyphicon-chevron-up"></i></a>
            <a ng-click="orderby = '-date'"><i ng-show="orderby === 'date'" class="glyphicon glyphicon-chevron-down"></i></a>
          </th>
          <th>
            <span ng-click="orderby = 'customername'">Customer name</span>
            <a ng-click="orderby = 'customername'"><i ng-show="orderby === '-customername'" class="glyphicon glyphicon-chevron-up"></i></a>
            <a ng-click="orderby = '-customername'"><i ng-show="orderby === 'customername'" class="glyphicon glyphicon-chevron-down"></i></a>
          </th>
          <th>
            Place
          </th>
          <th>
            Notes
          </th>
          <th>
            <!-- command buttons -->
          </th>
        </tr>
        <tr ng-repeat="(servicereportId, servicereport) in servicereports | orderByPriority | filter:search | orderBy: orderby" ng-if="!servicereport.hasOwnProperty('deleted') && servicereport.hasOwnProperty('number')">
          <td title="Number" sortable="'number'" class="condensed">
            {{ servicereport.number }}
          </td>
          <td title="Date in" sortable="'dateIn'" class="condensed">
            {{ servicereport.dateIn | date: 'dd MMMM yyyy HH:mm' }}
          </td>
          <!--
          <td title="Date out" sortable="'dateOut'" class="condensed">
            {{ servicereport.dateOut | date: 'dd MMMM yyyy HH:mm' }}
          </td>
          -->
          <td title="Customer name" sortable="'customername'" class="condensed">
            {{ servicereport.customername }}
          </td>
          <td title="Place" sortable="'place'" class="condensed">
            {{ servicereport.place }}
          </td>
          <td title="Notes" sortable="'notes'" class="condensed">
            {{ servicereport.notes }}
          </td>
          <td class="condensed">
            <a title="Edit service report" href="javascript:void(0)" class="btn btn-primary btn-xs" ng-click="editServicereport(servicereport)"><i class="glyphicon glyphicon-pencil"></i></a>
            <a title="Print service report" href="javascript:void(0)" class="btn btn-primary btn-xs" ng-click="preprintServicereport(servicereport)"><i class="glyphicon glyphicon-print"></i></a>
            <button
              title="Delete service report" 
              class="btn btn-primary btn-xs glyphicon glyphicon-trash"
              really-message="Are you really sure to remove service report <i>{{servicereport.number}}</i> ?" really-click="deleteServicereport(servicereport)"
            ></button>
          </td>
        </tr>
      </table>  
    </div>

    <form ng-show="signedIn() && (servicereportPrintMode || servicereportAddMode || servicereportEditMode)" class="servicereport form-horizontal">

      <div class="form-group form-group-condensed" title="Number of service report">
        <label for="number" class="control-label col-xs-2">Number</label>
        <div class="col-xs-1">
          <input type="text" class="form-control" id="number" ng-model="servicereport.number">
        </div>
      </div>

      <div class="form-group form-group-condensed" title="Owner of service report">
        <label for="owner" class="control-label col-xs-2">Owner</label>
        <div class="col col-xs-3">
          <input type="text" class="form-control" id="owner" ng-model="servicereport.owner">
        </div>
      </div>

      <div class="form-group form-group-condensed" title="Date of intervention start">
        <label for="date" class="control-label col-xs-2">Date in</label>
        <div class="col-xs-3">
          <span ng-hide="servicereportPrintMode">
       <!-- <datetimepicker data-ng-model="servicereport.dateIn"></datetimepicker> -->
       <!-- <quick-datepicker class="form-control" style="font-family: Open Sans; font-size: 100%; padding: 0;" ng-model="servicereport.dateIn" date-format="d MMMM yyyy" time-format="HH:mm" placeholder='Start of intervention date' disable-clear-button="true" required></quick-datepicker> -->
            <p class="input-group">
              <input type="text" class="form-control" datepicker-popup="{{format}}" ng-model="servicereport.dateIn" is-open="opened" min-date="minDate" max-date="'2015-06-22'" datepicker-options="dateOptions" date-disabled="disabled(date, mode)" ng-required="true" close-text="Close" />
              <span class="input-group-btn">
                <button type="button" class="btn btn-default" ng-click="open($event)"><i class="glyphicon glyphicon-calendar"></i></button>
              </span>
            </p>
          </span>
          <span ng-show="servicereportPrintMode">
            <input type="text" class="form-control" ng-value="servicereport.dateIn | date: 'd MMMM yyyy hh:mm'" />
          </span>
        </div>
      </div>

      <div class="form-group form-group-condensed" title="Date of intervention end">
        <label for="date" class="control-label col-xs-2">Date out</label>
        <div class="col-xs-4">
          <span ng-hide="servicereportPrintMode">
            <quick-datepicker style="font-family: Open Sans; font-size: 100%;" ng-model="servicereport.dateOut" date-format="d MMMM yyyy" time-format="HH:mm" placeholder='End of intervention date' disable-clear-button="true" required></quick-datepicker>
          </span>
          <span ng-show="servicereportPrintMode">
            <input type="text" class="form-control" ng-value="servicereport.dateOut | date: 'd MMMM yyyy hh:mm'" />
          </span>
        </div>
      </div>




      <div class="servicereport row no-print" style="margin-top: 1.0em;">
        <div class="col">

          <button type="submit" class="btn btn-primary" ng-hide="servicereportPrintMode" ng-click="submitServicereport()">
            <i class="glyphicon glyphicon-save"></i>&nbsp;Save
          </button>

          <button type="submit" class="btn btn-primary" ng-show="servicereportPrintMode" ng-click="printServicereport()">
            <i class="glyphicon glyphicon-print"></i>&nbsp;Print
          </button>

          &emsp;

          <button type="text" class="btn btn-inverse" ng-click="cancelServicereport()">
            <i class="glyphicon glyphicon-remove"></i>&nbsp;cancel
          </button>
        </div>
      </div>

    </form>

<!--
      <div class="form-group form-group-condensed" title="Customer name">
        <label for="customername" class="control-label col-xs-2">Customer</label>
        <div class="col c_ol-xs-10">
          <input type="text" class="form-control" id="customername" ng-model="servicereport.customername" typeahead="customer.name as customer.name for customer in getCustomers($viewValue) | orderByPriority | filter:$viewValue | limitTo:5" typeahead-on-select="onCustomerSelect($item, $model, $label)" autocomplete="off" autofocus>
        </div>
      </div>

      <div class="form-group form-group-condensed" title="Place of intervention">
        <label for="place" class="control-label col-xs-2">Place</label>
        <div class="col c_ol-xs-10">
          <input type="text" class="form-control" id="place" ng-model="servicereport.place">
        </div>
      </div>

      <div class="form-group form-group-condensed" title="Notes about intervention">
        <label for="notes" class="control-label col-xs-2">Notes</label>
        <div class="col c_ol-xs-10">
          <textarea rows="5" class="form-control" id="notes" ng-model="servicereport.notes" ></textarea>
        </div>
      </div>

      <div class="servicereport row no-print" style="margin-top: 0.2em;">
        <div class="col c_ol-xs-12">
<! - -
          <span ng-hide="servicereportPrintMode">
            <button type="submit" ng-click="submitServicereport()">Save</button>
          </span>

          <span ng-show="servicereportPrintMode">
            <button type="submit" ng-click="printServicereport()">Print</button>
          </span>
          <button type="text" ng-click="cancelServicereport()">cancel</button>
- - >
          <button type="submit" class="btn btn-primary" ng-hide="servicereportPrintMode" ng-click="submitServicereport()">
            <i class="glyphicon glyphicon-save"></i>&nbsp;Save
          </button>
          <button type="submit" class="btn btn-primary" ng-show="servicereportPrintMode" ng-click="printServicereport()">
            <i class="glyphicon glyphicon-print"></i>&nbsp;Print
          </button>

          &emsp;
          <button type="text" class="btn btn-inverse" ng-click="cancelServicereport()">
            <i class="glyphicon glyphicon-remove"></i>&nbsp;cancel
          </button>
        </div>
      </div>

    </form>
-->

  </div>
</div>